{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgArr => {\n  return imgArr.reduce((acc, el) => {\n    return (\n      acc +\n      `\n      <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n          <img class=\"gallery-img\" src=\"${el.webformatURL}\" alt=\"${el.tags}\" />\n        </a>\n        <div class=\"gallery-info\">\n          <p><span>Likes:</span> ${el.likes}</p>\n          <p><span>Views:</span> ${el.views}</p>\n          <p><span>Comments:</span> ${el.comments}</p>\n          <p><span>Downloads:</span> ${el.downloads}</p>\n        </div>\n      </li>\n    `\n    );\n  }, '');\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nexport const fetchPhotosByQuery = async searchQuery => {\n  const requestParams = {\n    q: searchQuery,\n    key: '47683521-7bc13f64e806eb93b38e1f294',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n  };\n\n  try {\n    const response = await axios.get('/', { params: requestParams });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data from Pixabay:', error);\n    throw error;\n  }\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\nconst loaderEl = document.querySelector('.js-loader');\n\nlet lightbox;\nlet page = 1;\nlet inputValue = '';\n\nconst showEndOfResultsMessage = () => {\n  iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n    timeout: 3000,\n  });\n};\n\nconst clearGallery = () => {\n  galleryEl.innerHTML = '';\n};\n\nconst loadImages = async () => {\n  try {\n    const response = await fetchPhotosByQuery(inputValue, page);\n\n    if (response.totalHits === 0) {\n      iziToast.error({\n        message: `Sorry, there are no images matching your search query \"${inputValue}\". Please try again!`,\n        position: 'topRight',\n        timeout: 3000,\n      });\n      clearGallery();\n      loadMoreBtnEl.classList.add('is-hidden');\n      return;\n    }\n\n    const { hits, totalHits } = response;\n\n    galleryEl.insertAdjacentHTML('beforeend', createGalleryCardTemplate(hits));\n\n    if (!lightbox) {\n      lightbox = new SimpleLightbox('.gallery-link', {\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    } else {\n      lightbox.refresh();\n    }\n\n    if (page * 15 >= totalHits) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      showEndOfResultsMessage();\n    } else {\n      loadMoreBtnEl.classList.remove('is-hidden');\n    }\n\n    const cardHeight =\n      galleryEl.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (err) {\n    iziToast.error({\n      message:\n        'An error occurred while fetching images. Please try again later.',\n      position: 'topRight',\n      timeout: 3000,\n    });\n    console.error(err);\n  } finally {\n    loaderEl.classList.add('is-hidden');\n  }\n};\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n\n  inputValue = event.currentTarget.elements.user_query.value.trim();\n  page = 1;\n\n  if (inputValue === '') {\n    iziToast.error({\n      message: 'Please enter a search word',\n      position: 'topRight',\n      timeout: 3000,\n    });\n    return;\n  }\n\n  clearGallery();\n  loadMoreBtnEl.classList.add('is-hidden');\n  loaderEl.classList.remove('is-hidden');\n\n  await loadImages();\n};\n\nconst onLoadMoreBtnClick = async () => {\n  page++;\n  loaderEl.classList.remove('is-hidden');\n  await loadImages();\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["createGalleryCardTemplate","imgArr","acc","el","axios","fetchPhotosByQuery","searchQuery","requestParams","error","searchFormEl","galleryEl","loadMoreBtnEl","loaderEl","lightbox","page","inputValue","showEndOfResultsMessage","iziToast","clearGallery","loadImages","response","hits","totalHits","SimpleLightbox","cardHeight","err","onSearchFormSubmit","event","onLoadMoreBtnClick"],"mappings":"owBAAO,MAAMA,EAA4BC,GAChCA,EAAO,OAAO,CAACC,EAAKC,IAEvBD,EACA;AAAA;AAAA,wCAEkCC,EAAG,aAAa;AAAA,0CACdA,EAAG,YAAY,UAAUA,EAAG,IAAI;AAAA;AAAA;AAAA,mCAGvCA,EAAG,KAAK;AAAA,mCACRA,EAAG,KAAK;AAAA,sCACLA,EAAG,QAAQ;AAAA,uCACVA,EAAG,SAAS;AAAA;AAAA;AAAA,MAK9C,EAAE,EChBPC,EAAM,SAAS,QAAU,0BAElB,MAAMC,EAAqB,MAAMC,GAAe,CACrD,MAAMC,EAAgB,CACpB,EAAGD,EACH,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,EACd,EAEE,GAAI,CAEF,OADiB,MAAMF,EAAM,IAAI,IAAK,CAAE,OAAQG,CAAa,CAAE,GAC/C,IACjB,OAAQC,EAAO,CACd,cAAQ,MAAM,oCAAqCA,CAAK,EAClDA,CACP,CACH,EChBMC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAgB,SAAS,cAAc,eAAe,EACtDC,EAAW,SAAS,cAAc,YAAY,EAEpD,IAAIC,EACAC,EAAO,EACPC,EAAa,GAEjB,MAAMC,EAA0B,IAAM,CACpCC,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,WACV,QAAS,GACb,CAAG,CACH,EAEMC,EAAe,IAAM,CACzBR,EAAU,UAAY,EACxB,EAEMS,EAAa,SAAY,CAC7B,GAAI,CACF,MAAMC,EAAW,MAAMf,EAAmBU,EAAYD,CAAI,EAE1D,GAAIM,EAAS,YAAc,EAAG,CAC5BH,EAAS,MAAM,CACb,QAAS,0DAA0DF,CAAU,uBAC7E,SAAU,WACV,QAAS,GACjB,CAAO,EACDG,IACAP,EAAc,UAAU,IAAI,WAAW,EACvC,MACD,CAED,KAAM,CAAE,KAAAU,EAAM,UAAAC,CAAW,EAAGF,EAE5BV,EAAU,mBAAmB,YAAaV,EAA0BqB,CAAI,CAAC,EAEpER,EAOHA,EAAS,QAAO,EANhBA,EAAW,IAAIU,EAAe,gBAAiB,CAC7C,SAAU,GACV,aAAc,MACd,aAAc,GACtB,CAAO,EAKCT,EAAO,IAAMQ,GACfX,EAAc,UAAU,IAAI,WAAW,EACvCK,KAEAL,EAAc,UAAU,OAAO,WAAW,EAG5C,MAAMa,EACJd,EAAU,kBAAkB,sBAAuB,EAAC,OACtD,OAAO,SAAS,CACd,IAAKc,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,OAAQC,EAAK,CACZR,EAAS,MAAM,CACb,QACE,mEACF,SAAU,WACV,QAAS,GACf,CAAK,EACD,QAAQ,MAAMQ,CAAG,CACrB,QAAY,CACRb,EAAS,UAAU,IAAI,WAAW,CACnC,CACH,EAEMc,EAAqB,MAAMC,GAAS,CAMxC,GALAA,EAAM,eAAc,EAEpBZ,EAAaY,EAAM,cAAc,SAAS,WAAW,MAAM,OAC3Db,EAAO,EAEHC,IAAe,GAAI,CACrBE,EAAS,MAAM,CACb,QAAS,6BACT,SAAU,WACV,QAAS,GACf,CAAK,EACD,MACD,CAEDC,IACAP,EAAc,UAAU,IAAI,WAAW,EACvCC,EAAS,UAAU,OAAO,WAAW,EAErC,MAAMO,EAAU,CAClB,EAEMS,EAAqB,SAAY,CACrCd,IACAF,EAAS,UAAU,OAAO,WAAW,EACrC,MAAMO,EAAU,CAClB,EAEAV,EAAa,iBAAiB,SAAUiB,CAAkB,EAC1Df,EAAc,iBAAiB,QAASiB,CAAkB"}